<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>계정관리</title>
    <script src="../../node_modules/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="../../node_modules/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="infoManage.css">
    <script src="/node_modules/axios/dist/axios.js"></script>
    <script>
            $(document).ready(function () {
                $('.headers').load('../../common/header/header.html');
            });
    </script>
</head>
<body>
    <div class="headers"></div>
    <div class="wrap">
      <div class="first_container">
          <div class="first_box1">
          </div>
          <div class="first_box2">
              <h5 a href="#" onclick="location.href='../main/myPageMain.html'"><a href="#">마이페이지</a></h5>
          </div>
          <div class="first_box3">
              <ul class="row">
                  <li class ="col-3"">
                    <h5 id= "col1">계정관리</h5>
                  </li>
                  <li class ="col-3">
                    <h4 id="col2"><a href="#">내 정보</a></h4>
                  </li>
                  <li class ="col-3">
                    <h4 id="col3" a href="#" onclick="location.href='password.html'"><a href="#">비밀번호 변경</a></h4>
                  </li>
                  <li class ="col-3">
                    <h4 id="col4" a href="#" onclick="location.href='withDrawal.html'"><a href="#">회원탈퇴</a></h4>
                  </li>   
               </ul>
               
          </div>
          <div class="first_box4">
          </div>
      </div>
      <div class="second_container">
          <div class="second_box1">
          </div>
          <div class="second_box2">
              <div class="contents_box">
                <div class="con1">
                  <div class="user_photo"></div>
                  <div class="user_info">
                      <h5 id="x-infoNick"></h5>
                      <h6 id="x-infoEmail"></h6>
                      <div class="logout">
                          <button id="btn1" a href="#" onclick="location.href='../../indexPage/index.html'">Logout</button>
                      </div>
                  </div>
                  <div class="line"></div>
                </div>
                <div class="con2">
                    <table>
                        <tbody>
                          <tr>
                            <td id="img1" a href="#" onclick="location.href='infoManage.html'"></td>
                            <td id="img2" a href="#" onclick="location.href='../tag/groupTag.html'"></td>
                          </tr>
                          <tr>
                            <td id="img1_text">계정관리</td>
                            <td id="img2_text">그룹태그</td>
                          </tr>
                          <tr>
                            <td id="img3"  a href="#" onclick="location.href='../wishList/wishList.html'"></td>
                            <td id="img4" a href="#" onclick="location.href='../invite/invitedList.html'"></td>
                          </tr>
                          <tr>
                            <td id="img3_text">위시리스트</td>
                            <td id="img4_text">초대된 목록</td>
                          </tr>
                        </tbody>
                    </table>
                </div>
              </div>
          </div>
          <div class="second_box3">
              <table>
                <tbody id="">
                  <tr>
                    <td id="td-1">닉네임</td>
                    <td id="null"><span id="x-nick"></span></td>
                  </tr>
                  <tr>
                    <td id="td-2">휴대폰 번호</td>
                    <td id="null"><span id="x-phoneNumber"></span></td>
                  </tr>
                  <tr>
                    <td id="td-3">이메일</td>
                    <td id="null"><span id="x-email">test@test.com</span></td>
                  </tr>                  
                </tbody>
              </table>
          </div>
          <div class="second_box4">
          </div>
      </div>
      <div class="third_container">
          <div class="third_box1"></div>
          <div class="third_box2"></div>
          <div class="third_box3">
            <div class="btn_box">
                <button id="btn2">수정하기</button>
            </div>
          </div>
          <div class="third_box4"></div>
      </div>
    </div>
      
  
    
  

  

  <footer>
  
  </footer>
  
<script src="../../node_modules/jquery/dist/jquery.min.js"></script>
<script src="./infoManage.js" type="module"></script>
<script type="text/javascript">
var xNick = document.querySelector("#x-nick");
var xPhoneNumber = document.querySelector("#x-phoneNumber");
var xEmail = document.querySelector("#x-email");
var xInfoNick = document.querySelector("#x-infoNick");
var xInfoEmail = document.querySelector("#x-infoEmail");

fetch("/user/getLoginUser")
  .then(function(response) {
    return response.json();
  })
  .then(function(result) {
    console.log(result.data);
    
     
     var user = result.data;
     
     xNick.innerHTML = user.nickName;
     xPhoneNumber.innerHTML = user.phone;
     xEmail.innerHTML = user.email;
     xInfoNick.innerHTML = user.nickName;
     xInfoEmail.innerHTML = user.email;
     



var arr = location.href.split('?');

if (arr.length == 1) {
}

var qs = arr[1];

// 쿼리 스트링에서 email 값을 추출한다.
var params = new URLSearchParams(qs);
var no = user.userId;

console.log(no);

$('#btn2').click(function (e) {
    e.preventDefault();
    window.location.href=`infoManage_edit.html?userId=${no}`;
});
})
</script>
</body>
</html>